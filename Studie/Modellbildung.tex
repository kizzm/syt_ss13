\newpage
%\null
%\cleardoublepage



%************************************************************************************************
% Kap.3 Mathematische Modellbildung
%************************************************************************************************

\chapter{Mathematische Modellbildung}
\label{chap:modellbildung}

\section{Das System}
\label{chap:system}
Der vorliegenden Simulationsstudie wird in folgendes, in Abb. \ref{fig:aufbau_system} dargestellen Systems zugrunde gelegt.
\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.6\textwidth]{System_Aufbau.jpg}
	\caption{Allgemeiner Aufbau des simulierten Systems}
	\label{fig:aufbau_system}
\end{figure}

Abb. \ref{fig:aufbau_system} zeigt also einen Regelkreis.
Der Motor bringt die Bewegungsenergie über elektromagnetisch/mechanische Wechselwirkung ins System ein.
Die Modellbildung hierfür wird im Abschnitt \ref{chap:motor}.
Der Spiegel reagiert auf die Zustandsänderungen der Motorwelle gemäß dem Modell aus Abschnitt \ref{chap:spiegel}.
Der Sensor überwacht den Bewegungszustand, genauer die Winkelposition der Motorwelle und wandelt diese in ein Spannungssignal um.
Das Übertragungsverhalten dieses Sensors, kann mit dem Modellen aus Abschnitt \ref{chap:sensor} beschrieben werden.
Das Spannungssignal des Sensors liefert den Sollwert der Regeleinrichtung.
Die Ermittlung der Reglerparameter erfolgt während der Simulationsdurchführung in Abschnitt \ref{chap:Simulationsdurchfuehrung}.

\section{Der Spiegel}
\label{chap:spiegel}

Lineares Modell für die Berechnungen:

\begin{center}
\begin{equation}
\label{equ:lineares_motor_model1}
\Delta \phi = \unit[20]{°} = \unit[0,349]{rad}
\end{equation}

\begin{equation}
\label{equ:lineares_motor_model2}
\Delta t = \unit[1]{ms} = \unit[0,001]{s}
\end{equation}

\begin{equation}
\label{equ:lineares_motor_model3}
\omega = \frac {\Delta \phi}{\Delta t} = \frac {\unit[0,349]{rad}}{\unit[0,001]{s}} = \unit[349]{rad/s}
\end{equation}
\end{center}

Es ergibt sich eine Druchschnittswinkelgeschwindigkeit von \unit[349]{rad/s}, um einen Winkel von \unit[20]{°} in 1 ms zu überfahren.
Dies würde aber eine Anfangs- und Endgeschwindigkeit voraussetzen. Da der Spiegel aber aus einer Ruhelage beschleunigt und wieder in einer Ruhelage enden soll, 
wird ein linearer Verlauf der Geschwindigkeit von $\omega = \unit[0]{rad/s}$ und der doppelten Durchschnittsgeschwindigkeit $\omega = \unit[698]{rad/s}$ bei der Hälfte 
der Strecke und bei der Endposition wieder $\omega = \unit[0]{rad/s}$ der zu fahrenden Strecke angenommen. 
Daraus folgt eine Beschleunigung von:
\begin{center}
\begin{equation}
\label{equ:max_alpha_motor1}
\Delta \omega = \unit[698]{rad/s}
\end{equation}

\begin{equation}
\label{equ:max_alpha_motor2}
\Delta t = \unit[0,5]{ms} = \unit[0,0005]{s}
\end{equation}

\begin{equation}
\label{equ:max_alpha_motor3}
\alpha = \frac {\Delta \omega}{\Delta t} = \frac {\unit[698]{rad/s}}{\unit[0,0005]{s}} = \unit[1,396 *10^6]{rad/s^2}
\end{equation}
\end{center}

Der Spiegel erfährt zu Beginn der Regelung eine Beschleunigung von $\alpha = \unit[1,396 *10^6]{rad/s^2}$ um nach der Hälfte der Zeit, also nach 0,5 ms wieder mit dem 
gleichen Betrag der Beschleunigung abgebremst zu werden.

Modell für den Spiegel:
\begin{itemize}
\item Durchmesser: \unit[12]{mm} --> Radius: R = \unit[6]{mm}
\item Höhe: h = \unit[2]{mm}
\item Gewicht: m = \unit[10]{g}
\end{itemize}

Das Trägheitsmoment des Spiegels beträgt demnach: 
\begin{center}
\begin{equation}
\label{equ:J_spiegel1}
J = \frac{1}{4} * m * R^2 + \frac{1}{12} * m * h^2
\end{equation}

\begin{equation}
\label{equ:J_spiegel2}
J = \frac{1}{4} * \unit[10*10^{-3}]{kg} * (\unit[6*10^{-3}]{m})^2 + \frac{1}{12} * \unit[10*10^{-3}]{kg} * (\unit[2*10^{-3}]{m})^2
\end{equation}

\begin{equation}
\label{equ:J_spiegel3}
J = \unit[93,3 * 10^{-9}]{kgm^2}
\end{equation}
\end{center}

Aus den oben berechneten Daten ergibt sich ein Lastmoment von:
\begin{center}
\begin{equation}
\label{equ:M_last1}
M_L = J * \alpha
\end{equation}

\begin{equation}
\label{equ:M_last2}
M_L = \unit[93,3 * 10^{-9}]{kgm^2} * \unit[1,396 *10^6]{rad/s^2}
\end{equation}

\begin{equation}
\label{equ:M_last3}
M_L = \unit[130,25 * 10^{-3}]{Nm}
\end{equation}
\end{center}

Theoretische Maximale Leistung eines Gleichstrommotors:
\begin{center}
\begin{equation}
\label{equ:max_leistung_motor1}
P = M_L * \omega
\end{equation}

\begin{equation}
\label{equ:max_leistung_motor2}
P = \unit[130,25 * 10^{-3}]{Nm} * \unit[698]{rad/s}
\end{equation}

\begin{equation}
\label{equ:max_leistung_motor3}
P = \unit[91]{W}
\end{equation}
\end{center}

\section{Der Motor}
\label{chap:motor}
In der Regel werden Laserablenkespiegel über einen Galvo gesteuert. Bei der Bearbeitung dieser Simulationsstudie ergaben sich Probleme, Informationen Über die Ansteuerung
solcher Galvos zu bekommen. Insofern wird die Simulationsstudie auf der Ansteuerung eines Gleichstrommotors beruhen. Aber auch hierbei konnten jedoch keine Informationen 
über die Gleichstrommotorparameter $K_M \Phi$ und der Reibungskonstanten bei verschiedenen Herstellern gefunden werden. Um dennoch die Studie durchführen zu können, wird auf die
Motorvorgaben aus der Vorlesung Systemtechnik von Prof. Froriep zurück gegriffen.

\subsection{Der elektrische Teil}
\label{chap:elekteil}
Der elektrische Teil eines Gleichstrommotors besteht aus einer Spule $L_A$, ihrem Innenwiderstand $R_A$, der induzierten Spannung $e_A$ und der Eingangsspannung
für den Motor $U_e$, siehe Abb. \ref{fig:elekeinzelteil}.
\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.6\textwidth]{ElektrischerTeil.jpg}
	\caption{Elektrischer Teil des Motors}
	\label{fig:elekeinzelteil}
\end{figure}
Es lässt sich folgende Spannungsmasche aufstellen:
\begin{center}
\begin{equation}
\label{equ:motorspannung}
U_e = u_L + u_R - e_A
\end{equation}
\end{center}
Die Spannung $e_A$ wirkt der Eingangsspannung entgegen und hat ein negatives Vorzeichen.
Die Teilspannungen $u_L$ und $u_R$ lassen sich folgendermaßen umschreiben:
\begin{center}
\begin{equation}
\label{equ:motorersatzspannung1}
u_L = L_A * si_A
\end{equation}

\begin{equation}
\label{equ:motorersatzspannung2}
u_R = R_A * i_A
s = \frac{d}{dt}
\end{equation}
\end{center}

Dieses lässt sich in einer Formel ausdrücken:
\begin{center}
\begin{equation}
\label{equ:motorspannungausfuehrlich}
U_e = L_A * si_A + R_A * i_A - e_A
\end{equation}
\end{center}
Für die spätere Integration in Simulink wird die Gleichung \ref{equ:motorspannungausfuehrlich} umgeschrieben:
\begin{center}
\begin{equation}
\label{equ:motorspannungsimulink}
si_A = \frac{1}{L_A} (e_A - R_Ai_A + u_e)
\end{equation}
\end{center}
Wobei
\begin{center}
\begin{equation}
\label{equ:motorspannungsimulinkkonst}
e_a = K_M  \Phi \omega
\end{equation}
\end{center}
$K_M$ und $\Phi$ Motorkonstanten sind.

\subsection{Der mechanische Teil}
\label{chap:mechteil}
Der mechanische Teil eines Gleichstrommotors besteht aus dem gesamten Drehmoment $M_B$, dem Motormoment $M_M$, dem Lastmoment $M_L$ des Spiegels. 
Sowie der Moment-Winkel-Beziehung (Reibung) (siehe Abb. \ref{fig:mecheinzelteil}):
\begin{equation}
\label{equ:reibmoment}
M_R = r  \omega \text{, mit } \omega = \frac{d}{d t} \varphi
\end{equation}
\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.6\textwidth]{MechanischerTeil.jpg}
	\caption{Mechanischer Teil des Motors}
	\label{fig:mecheinzelteil}
\end{figure}
Es lässt sich folgende Moment-Bilanzgleichung aufstellen:
\begin{center}
\begin{equation}
\label{equ:motormomentebilanz1}
M_B = M_M - M_R - M_L
\end{equation}
\begin{equation}
\label{equ:motormomentebilanz2}
J * \frac{d}{dt} \omega = M_M - r  \omega - M_L
\end{equation}
\end{center}
Für die spätere Integration in Simulink wird die Gleichung \ref{equ:motormomentebilanz2} umgeschrieben:
\begin{center}
\begin{equation}
\label{equ:motormomentsimulink}
s\omega = \frac{1}{J} (M_M - r * \omega - M_L)
\end{equation}
\end{center}
Wobei
\begin{center}
\begin{equation}
\label{equ:motormomentsimulinkkonst}
M_M = K_M * \Phi *i_A
\end{equation}
\end{center}
$K_M$ und $\Phi$ Motorkonstanten sind.

\subsection{Der ganze Motor}
\label{chap:ganzermotor}
Werden die beiden Einzelaspekte des Motors gleichzeitig betrachtet, so ergbit sich folgender Zusammenhang wie er in Abb. \ref{fig:motoraufbau} dargestellt ist.
\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.6\textwidth]{Motoraufbau.jpg}
	\caption{Aufbau des Motors}
	\label{fig:motoraufbau}
\end{figure}

\section{Der Sensor}
\label{chap:sensor}
Im Folgenden werden der Aufbau, das physikalische Modell sowie verschiedene mathematische Modelle des Sensors vorgestellt und erläutert.

\subsection{Das physikalische Modell des Sensors}
\label{chap:physik_modell_sensor}
Der in Abb. \ref{fig:aufbau_system} dargestellte Sensor gliedert sich nach folgender Darstellung in Abb. \ref{fig:funktions_diagramm_sensor} auf in:
\begin{itemize}
	\item{Einer Lichtquelle: LED mit einer Strahlungsleistung $\phi_e(\theta)$}
	\item{Einer Blende mit einer Transmissionsfunktion $T(\varphi)$}
	\item{Einer Anordnung aus Photodioden, welche die transmittierte Lichtleistung als Spannungssignal $U_{ph} (\phi)$ bzw. $U_{ph} (\varphi)$ darstellt}
\end{itemize}

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.8\textwidth]{Sensor_Funktionsdiagramm.jpg}
	\caption{Allgemeines Funktionsdiagramm des Sensors}
	\label{fig:funktions_diagramm_sensor}
\end{figure}

\begin{figure}[!htb]
	\centering
	\includegraphics[width=0.8\textwidth]{Sensor_Aufbau_schichten.jpg}
	\caption{Allgemeiner Aufbau des Sensors}
	\label{fig:sensor_aufbau_schichten}
\end{figure}

\textbf{Die Photodioden}\\
In Abb. \ref{fig:sensor_aufbau_schichten} ist die Anordnung der Dioden Skizziert. 
Diese Setzt sich aus 4 Photodioden zusammen, von denen jeweils zwei gegenüberliegende mittels dem Differenzenprinzip verschaltet sind.
Störeinflüsse, wie z.B. thermisches Rauschen, sollen somit vermindert werden. 
Die beiden sich somit ergebenen Diodengruppen, sind symetrisch zur Position $\varphi = \unit[0]{°} $ angeordnet.
Diese Liefern ein Spannungssignal $U(\phi)$, welches von der auftreffenden Lichtleistung $\phi$ abhängt da sie im quasi Kurzschluss betrieben werden\cite{JoSi08}.
Die Dioden sind als Kreissegmente gleicher Form und Größe ausgeführt. \\
\\
\textbf{Die Blende}\\
Die Blende wird im folgenden als masselos und völlig lichtundurchlässig angenommen.
Die Bewegung der Motorwelle wird auf die Blende übertragen, sodass die Abdeckung der Dioden mit der Winkelposition variert.
Die Geometrie der Blende ist dabei auf die Geometrie der Photodioden abgestimmt, sodass für Randwerte des Messbereichs des Sensors völlige Abschattung bzw völlige Ausleuchtung je einer Diodengruppe erreicht wird.
\textbf{Die LED}\\
Die LED wird im folgenden als ein punktförmiger, lambert'scher Strahler betrachtet.
Die gesamte Strahlungsleistung $\phi_e$ wird in den Halbraum $\omega = 2\pi$ abgestrahlt. 
Das Spektrum der LED wird in dieser Simulationsstudie nicht berücksichtigt.\\
\\
Das Sensor-System bildet demnach die Bewegungen der Motorwelle als Spannungssignal ab, in dem die Einfallende Lichtleistung der LED durch Abschattung der Photodioden mittels der dazwischen liegenden Blende verändert wird. 

\begin{figure}[!htb]
\centering
\subfigure[Abdunklung bei ca. $\unit[0]{°}$ Azimutwinkel]{\includegraphics[height=45mm]{Sensor_Abdunklung_0.jpg}}
\subfigure[Abdunklung bei ca. $\unit[40]{°}$ Azimutwinkel]{\includegraphics[height=45mm]{Sensor_Abdunklung_40.jpg}}
\caption{Skizze des Funktionsprinzips des Sensors}
\label{abb:sensor_funktion}
\end{figure}

\subsection{Das lineare Sensormodell}
\label{chap:linear_sensor}

\subsection{Das nicht lineare Sensormodell}
\label{chap:nonlinear_sensor}